# Copilot Instructions for Astrology for the Future

## Project Overview

**Astrology for the Future** is a multilingual landing website offering astrology readings and educational resources. The site is built with Astro and Tailwind CSS, rendering statically for CDN/static hosting deployment.

## Tech Stack

- **Astro 5** – Static site generation framework
- **Tailwind CSS 4** – Utility-first styling
- **TypeScript** – Type safety
- **Astro Content Collections** – Structured content management
- **Marked** – Markdown parsing
- **Sass/Stylus** – CSS preprocessing options
- **PostCSS** – CSS transformation

## Project Structure

```
astrology-for-the-future/
├── src/
│   ├── assets/                 # Static images, fonts, media
│   ├── components/             # Reusable Astro components
│   │   ├── Global/             # Header, Footer, Navigation, Meta
│   │   ├── Sections/           # Page content blocks (Hero, FeatureCard, Quote, etc.)
│   │   ├── UI/                 # Reusable UI components (Button, CTA, etc.)
│   │   ├── componentMap.ts     # Dynamic component routing
│   │   └── Fallback.astro      # Fallback component for unknown types
│   ├── content/                # Content collections (Astro Content)
│   │   ├── config.ts           # Content schema definitions
│   │   └── pages/              # Locale-specific content
│   │       ├── en/             # English content
│   │       │   ├── index.md    # Home page frontmatter & content
│   │       │   └── docs/       # Documentation pages
│   │       └── es/             # Spanish content
│   ├── i18n/                   # Internationalization
│   │   ├── en.json             # English translations
│   │   ├── es.json             # Spanish translations
│   │   └── index.ts            # i18n helper functions
│   ├── layouts/                # Astro layouts
│   │   ├── BaseLayout.astro    # Default page layout
│   │   └── DocsLayout.astro    # Documentation layout
│   ├── pages/                  # Astro dynamic routing
│   │   └── [...slug].astro     # Catch-all route for localized pages
│   └── styles/                 # Global styles
│       └── global.css          # Global CSS/Tailwind directives
├── static/                     # Static files (copied as-is)
├── astro.config.mjs            # Astro configuration
├── tailwind.config.mjs         # Tailwind CSS configuration
├── tsconfig.json               # TypeScript configuration
├── postcss.config.cjs          # PostCSS configuration
└── package.json                # Dependencies & scripts
```

## Key Conventions & Patterns

### Content Management
- **Markdown Frontmatter**: Pages are defined via Markdown files in `src/content/pages/{locale}/`
- **Frontmatter specifies layout, locale, and content blocks** (hero, features, quotes, etc.)
- **Content Collections** (`src/content/config.ts`) defines schemas for strict validation

### Components
- **Global Components** (`src/components/Global/`) – Header, Footer, Navigation
- **Section Components** (`src/components/Sections/`) – Hero, FeatureCard, FeatureGrid, Quote, SplitContent, ImageOverlay
- **UI Components** (`src/components/UI/`) – Reusable elements like Button, CTA, ResponsivePicture, WhatsAppButton
- **Component Mapping** (`src/components/componentMap.ts`) – Routes content block types to Astro components
- **Fallback** (`src/components/Fallback.astro`) – Handles unknown component types gracefully

### Internationalization (i18n)
- **Two locales**: `en` (English) and `es` (Spanish)
- **Default locale**: `en`
- **URL structure**: `/en/*` and `/es/*`
- **Redirect**: `/` redirects to `/en`
- **Translation files**: `src/i18n/{en,es}.json` contain UI strings
- **Helper functions** in `src/i18n/index.ts` for accessing translations

### Styling
- **Tailwind CSS 4** is the primary styling approach
- **Lightning CSS** as CSS transformer (in Vite config)
- **PostCSS** for CSS transformations (autoprefixer, cssnano)
- **SCSS/Stylus** available for component-specific styling
- **Global styles** in `src/styles/global.css`

### Build & Development
- **Dev server**: `npm run dev` (default: http://localhost:4321)
- **Production build**: `npm run build` (outputs to `dist/`)
- **Preview build**: `npm run preview`
- **Astro CLI**: `npm run astro`

## Workflow Guidelines

### Adding New Pages
1. Create a Markdown file in `src/content/pages/{locale}/` (e.g., `src/content/pages/en/about.md`)
2. Define frontmatter with layout, locale, and content blocks
3. Update content schema in `src/content/config.ts` if adding new block types
4. Add translations to `src/i18n/en.json` and `src/i18n/es.json`

### Creating New Components
1. Add `.astro` file to appropriate directory (Global, Sections, or UI)
2. Define component props using TypeScript interfaces
3. Map new section types to components in `src/components/componentMap.ts`
4. Use Tailwind classes for styling
5. Ensure responsive design with breakpoints (sm, md, lg, xl)

### Adding Translations
1. Add key-value pairs to `src/i18n/en.json` and `src/i18n/es.json`
2. Use helper functions from `src/i18n/index.ts` to access translations in components

## Important Files & Their Purpose

| File | Purpose |
|------|---------|
| `astro.config.mjs` | Astro framework configuration, i18n setup, deployment URL |
| `tailwind.config.mjs` | Tailwind CSS customization and theme extensions |
| `src/content/config.ts` | Content collection schemas and validation rules |
| `src/components/componentMap.ts` | Maps content block types to Astro components |
| `src/layouts/BaseLayout.astro` | Main page layout wrapper (meta, header, footer) |
| `src/pages/[...slug].astro` | Dynamic route handler for all locale-specific pages |
| `src/i18n/index.ts` | i18n utility functions for translations |

## Performance Considerations

- **Static generation**: All pages are pre-rendered at build time
- **No JavaScript runtime** for content delivery (unless explicitly added to components)
- **Responsive images**: Use `ResponsivePicture.astro` component for optimized image delivery
- **CSS optimization**: Lightning CSS and cssnano minimize CSS in production

## Common Tasks

### Modify Site-wide Navigation
Edit `src/components/Global/Navigation.astro` and update translations in i18n files.

### Add a New Astrology Service Offering
1. Add new FeatureCard content in the homepage Markdown
2. Update `src/components/Sections/FeatureCard.astro` if custom styling needed
3. Add translated text to i18n files

### Update Page Metadata (SEO)
Edit `src/components/Global/Meta.astro` or define meta in frontmatter of `.md` files.

### Add External Links or CTAs
Use `src/components/UI/Cta.astro` and `src/components/UI/WhatsAppButton.astro` components.

## Deployment

- **Build output**: `dist/` directory contains production-ready files
- **Default site URL**: `https://astrology-for-the-future.pages.dev`
- **Hosting**: Supports any static file host (Netlify, Vercel, Cloudflare Pages, AWS S3, etc.)
- **Environment**: No server-side processing required

## Getting Help

- Astro documentation: https://docs.astro.build/
- Tailwind documentation: https://tailwindcss.com/
- Content Collections guide: https://docs.astro.build/en/guides/content-collections/
- i18n routing: https://docs.astro.build/en/guides/internationalization/
